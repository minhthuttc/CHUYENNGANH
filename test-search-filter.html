<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test T√¨m Ki·∫øm & L·ªçc D·ª± √Ån</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <h1>üß™ Test T√¨m Ki·∫øm & L·ªçc D·ª± √Ån</h1>
        
        <div class="card">
            <h3>Test Cases</h3>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                <button onclick="testLoadAll()" class="btn btn-primary">1. Load t·∫•t c·∫£ d·ª± √°n</button>
                <button onclick="testSearchByName()" class="btn btn-primary">2. T√¨m ki·∫øm theo t√™n "Logo"</button>
                <button onclick="testFilterByCategory()" class="btn btn-primary">3. L·ªçc theo danh m·ª•c "UI/UX"</button>
                <button onclick="testFilterByStatus()" class="btn btn-primary">4. L·ªçc tr·∫°ng th√°i "ƒêang tuy·ªÉn"</button>
                <button onclick="testFilterByBudget()" class="btn btn-primary">5. L·ªçc ng√¢n s√°ch 5-10 tri·ªáu</button>
                <button onclick="testSortByBudget()" class="btn btn-primary">6. S·∫Øp x·∫øp theo ng√¢n s√°ch cao</button>
                <button onclick="testCombinedFilters()" class="btn btn-primary">7. K·∫øt h·ª£p nhi·ªÅu b·ªô l·ªçc</button>
            </div>
        </div>

        <div class="card">
            <h3>K·∫øt qu·∫£</h3>
            <div id="result" style="background: #f5f5f5; padding: 1rem; border-radius: 5px; min-height: 200px; font-family: monospace; white-space: pre-wrap;"></div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:3000/api';
        const resultDiv = document.getElementById('result');

        function showResult(title, data) {
            resultDiv.innerHTML = `
‚úÖ ${title}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${JSON.stringify(data, null, 2)}
            `;
        }

        function showError(title, error) {
            resultDiv.innerHTML = `
‚ùå ${title}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${error}
            `;
        }

        async function testLoadAll() {
            try {
                const response = await fetch(`${API_URL}/projects`);
                const data = await response.json();
                showResult('Load t·∫•t c·∫£ d·ª± √°n', {
                    success: data.success,
                    count: data.count,
                    projects: data.projects.map(p => ({
                        title: p.title,
                        category: p.category,
                        status: p.status,
                        budget: p.budget
                    }))
                });
            } catch (error) {
                showError('Load t·∫•t c·∫£ d·ª± √°n', error.message);
            }
        }

        async function testSearchByName() {
            try {
                const response = await fetch(`${API_URL}/projects?search=Logo`);
                const data = await response.json();
                showResult('T√¨m ki·∫øm "Logo"', {
                    success: data.success,
                    count: data.count,
                    projects: data.projects.map(p => p.title)
                });
            } catch (error) {
                showError('T√¨m ki·∫øm', error.message);
            }
        }

        async function testFilterByCategory() {
            try {
                const response = await fetch(`${API_URL}/projects?category=UI/UX Design`);
                const data = await response.json();
                showResult('L·ªçc danh m·ª•c "UI/UX Design"', {
                    success: data.success,
                    count: data.count,
                    projects: data.projects.map(p => ({
                        title: p.title,
                        category: p.category
                    }))
                });
            } catch (error) {
                showError('L·ªçc danh m·ª•c', error.message);
            }
        }

        async function testFilterByStatus() {
            try {
                const response = await fetch(`${API_URL}/projects?status=open`);
                const data = await response.json();
                showResult('L·ªçc tr·∫°ng th√°i "open"', {
                    success: data.success,
                    count: data.count,
                    projects: data.projects.map(p => ({
                        title: p.title,
                        status: p.status
                    }))
                });
            } catch (error) {
                showError('L·ªçc tr·∫°ng th√°i', error.message);
            }
        }

        async function testFilterByBudget() {
            try {
                const response = await fetch(`${API_URL}/projects?minBudget=5000000&maxBudget=10000000`);
                const data = await response.json();
                showResult('L·ªçc ng√¢n s√°ch 5-10 tri·ªáu', {
                    success: data.success,
                    count: data.count,
                    projects: data.projects.map(p => ({
                        title: p.title,
                        budget: p.budget.toLocaleString('vi-VN')
                    }))
                });
            } catch (error) {
                showError('L·ªçc ng√¢n s√°ch', error.message);
            }
        }

        async function testSortByBudget() {
            try {
                const response = await fetch(`${API_URL}/projects?sort=budget-high`);
                const data = await response.json();
                showResult('S·∫Øp x·∫øp theo ng√¢n s√°ch cao', {
                    success: data.success,
                    count: data.count,
                    projects: data.projects.slice(0, 5).map(p => ({
                        title: p.title,
                        budget: p.budget.toLocaleString('vi-VN')
                    }))
                });
            } catch (error) {
                showError('S·∫Øp x·∫øp', error.message);
            }
        }

        async function testCombinedFilters() {
            try {
                const response = await fetch(`${API_URL}/projects?status=open&minBudget=3000000&sort=budget-high`);
                const data = await response.json();
                showResult('K·∫øt h·ª£p: ƒêang tuy·ªÉn + Ng√¢n s√°ch > 3tr + S·∫Øp x·∫øp cao', {
                    success: data.success,
                    count: data.count,
                    projects: data.projects.map(p => ({
                        title: p.title,
                        status: p.status,
                        budget: p.budget.toLocaleString('vi-VN')
                    }))
                });
            } catch (error) {
                showError('K·∫øt h·ª£p b·ªô l·ªçc', error.message);
            }
        }

        // Auto test khi load trang
        window.onload = () => {
            resultDiv.innerHTML = 'üëã Ch·ªçn m·ªôt test case ƒë·ªÉ b·∫Øt ƒë·∫ßu!';
        };
    </script>
</body>
</html>